import {Callout} from 'nextra/components'

# CAN Interface

AuroraBotics CAN enabled devices are capable of communicating on a CAN 2.0B bus.
This document serves to explain, in general, how AuroraBotics devices communicate across it.

Any device-specific information will be in that devices documentation.

For specific information on how a CAN bus works, check out TI's article [here](https://www.ti.com/lit/an/sloa101b/sloa101b.pdf).

## Arbitration ID

AuroraBotics devices use the [FRC arbitration ID standard](https://docs.wpilib.org/en/stable/docs/software/can-devices/can-addressing.html).

This means that the arbitration ID is as follows:

| Field | Value |
| :- | :- |
| Device Type | `0b01010` (10 - Miscellaneous) **or** `0b11111` (31 - Firmware Update) |
| Manufacturer | `0b00001000` (8 - Team Use) (*AuroraBotics will have a manufacturer ID if/when devices are sold*) |
| API | `0b0000000000` to `0b1111111111` See [API](#can-api) for more info |
| Device Number | `0b000000` to `0b111110` (`0b111111` reserved for device specific brodcast messages) |

## CAN API

| Message | Class | Index | API | Data Length (Bytes) | Direction (Controller's POV) |
| :- | :-: | :-: | :-: | :-: | :-: |
| [Status](./can/status) | 0 | 0 | `0x000` | 8 | Receive |
| [Identify](./can/identify) | 0 |  1 | `0x001` | 1 | Transmit |
| [Clear Faults](./can/clear_faults) | 0 | 2 | `0x002` | 0 | Transmit |
| [Set Flash](./can/set_flash) | 1 | 0 | `0x010` | 8 | Transmit |
| [Get Flash](./can/get_flash) | 1 | 1 | `0x011` | 1 | Transmit |
| [Report Flash](./can/report_flash) | 1 | 2 | `0x012` | 8 | Receive |
| [Reset Flash](./can/reset_flash) | 1 | 3 | `0x013` | 0 | Transmit |

### API Classes

| Class | Definition |
| :-: | :- |
| 0 | Priority device control. |
| 1 | Device flash (settings) management. |
| 2-7 | Reserved for future implementation. |
